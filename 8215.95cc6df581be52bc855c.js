(globalThis.webpackChunknew_bedford_framework=globalThis.webpackChunknew_bedford_framework||[]).push([[8215],{58215:(e,t,o)=>{"use strict";o.d(t,{A:()=>O});o(94226);var r=o(80296),n=o(23029),i=o(92901),a=o(50388),s=o(53954),u=o(85501),c=o(64467),l=o(14302),h=o(85579),p=o(84430),m=o(54790),v=o(57064);var f=o(42512),d=function(e){function t(e,o){var r;return(0,f.a)(this,t),(r=(0,f.d)(this,t)).source=e,r.repeatCount=o,r.sourceVertexCount=e.attributes.get("aPosition").count,r}return(0,f.c)(t,e),(0,f._)(t)}(h.A),x=o(53222);function y(e,t,o,r){for(var n=e.attributes.get(t),i=o*e.sourceVertexCount*n.itemSize,a=0;a<e.sourceVertexCount;a++)for(var s=0;s<n.itemSize;s++)n.array[i++]=r[s]}var g=o(90168),A=o(99076),C=o(45299),S=o(55322),w=o(80225),b=o(22131),z=o(50352),F=o(91028),N=o(35689),P=o(32171);function M(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function G(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?M(Object(o),!0).forEach(function(t){(0,c.A)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):M(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}var O=function(e){function t(e,o){var r,i,u,f;return(0,n.A)(this,t),i=this,u=t,f=[e,o],u=(0,s.A)(u),r=(0,a.A)(i,k()?Reflect.construct(u,f||[],(0,s.A)(i).constructor):u.apply(i,f)),(0,c.A)(r,"viewSize",17),(0,c.A)(r,"baseGridSize",36),(0,c.A)(r,"onContextCreate",function(e){e.extensions.get("OES_element_index_uint")}),(0,c.A)(r,"createGeometryBatch",function(){var e=r.props.boxSize,t=r.props.boxSize,o=r.props.boxSize,n=r.baseGridSize/r.props.boxSize|0,i=r.baseGridSize/r.props.boxSize|0,a=e*n*-.5-.5*e,s=o*i*-.5-.5*o,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,o=void 0===t?1:t,r=e.height,n=void 0===r?1:r,i=e.depth,a=void 0===i?1:i,s=e.widthSegments,u=void 0===s?1:s,c=e.heightSegments,f=void 0===c?1:c,d=e.depthSegments,x=void 0===d?1:d,y=e.sides,g=void 0===y?{top:!0,bottom:!0,left:!0,right:!0,front:!0,back:!0}:y,A=e.position,C=void 0===A?l.hq:A,S=e.normal,w=void 0===S?l.py:S,b=e.uv,z=void 0===b?l.F:b,F=new h.A,N=[],P=[],M=[],G=[],k=0,O=function(e,t,o,r,n,i,a,s,u,c){for(var l=i/u,h=a/c,p=.5*i,m=.5*a,v=.5*s,f=u+1,d=c+1,x=k,y=0;y<d;y++)for(var g=y*h-m,A=0;A<f;A++){var C=A*l-p;N[3*k+e]=C*r,N[3*k+t]=g*n,N[3*k+o]=v,P[3*k+e]=0,P[3*k+t]=0,P[3*k+o]=s>0?1:-1,M[2*k]=A/u,M[2*k+1]=1-y/c,k++}for(var S=0;S<c;S++)for(var w=0;w<u;w++){var b=x+w+f*S,z=x+w+f*(S+1),F=x+(w+1)+f*(S+1),O=x+(w+1)+f*S;G.push(b,z,O),G.push(z,F,O)}};return g.right&&O(2,1,0,-1,-1,a,n,o,x,f),g.left&&O(2,1,0,1,-1,a,n,-o,x,f),g.top&&O(0,2,1,1,1,o,a,n,u,x),g.bottom&&O(0,2,1,1,-1,o,a,-n,u,x),g.front&&O(0,1,2,1,-1,o,n,a,u,f),g.back&&O(0,1,2,-1,-1,o,n,-a,u,f),C&&(0,p.A)(F,C,new v.A({array:new Float32Array(N),itemSize:3})),w&&(0,p.A)(F,w,new v.A({array:new Float32Array(P),itemSize:3})),z&&(0,p.A)(F,z,new v.A({array:new Float32Array(M),itemSize:2})),(0,m.A)(F,new Uint16Array(G)),F}({width:e,height:t,depth:o,widthSegments:4,depthSegments:4,sides:{top:!0,right:!0,front:!0},uv:!1});!function(e){for(var t=e.geometry,o=e.translation,r=e.positionAttributeName,n=void 0===r?"aPosition":r,i=t.attributes.get(n).array,a=0;a<i.length;a+=3)i[a]+=o[0],i[a+1]+=o[1],i[a+2]+=o[2]}({geometry:u,translation:[0,-.5*t,0]});var c=function(e){var t=e.sourceGeometry,o=e.repeatCount,r=e.AttributeArrayType,n=void 0===r?Float32Array:r,i=e.IndexArrayType,a=void 0===i?Uint16Array:i,s=e.usage,u=void 0===s?x.Ek:s,c=new d(t,o),l=c.sourceVertexCount;t.attributes.forEach(function(e){for(var t=new n(o*l*e.itemSize),r=0,i=0;r<o;r++)for(var a=0;a<l;a++,i+=e.itemSize)for(var s=0;s<e.itemSize;s++)t[i+s]=e.array[a*e.itemSize+s];(0,p.A)(c,e.name,new v.A({array:t,itemSize:e.itemSize,usage:u}))});for(var h=t.index.count,f=t.index.array,y=new a(o*h),g=0;g<o;g++)for(var A=0;A<h;A++)y[g*h+A]=f[A]+g*l;return(0,m.A)(c,y),c}({sourceGeometry:u,repeatCount:n*i,IndexArrayType:Uint32Array});return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.batch,o=void 0===t?null:t,r=e.attributeName,n=void 0===r?"":r,i=e.itemSize,a=void 0===i?4:i,s=e.usage,u=void 0===s?x.Ek:s,c=e.factory,l=void 0===c?null:c,h=new Float32Array(o.repeatCount*o.sourceVertexCount*a);if((0,p.A)(o,n,new v.A({array:h,itemSize:a,usage:u})),l)for(var m=[],f=0;f<o.repeatCount;f++)l(m,f,o.repeatCount),y(o,n,f,m)}({batch:c,attributeName:"aGridPosition",itemSize:3,factory:function(t,r){var u=r%n*e+a,c=(r/i|0)*o+s;t[0]=u,t[1]=0,t[2]=c}}),c}),r.isSupported?(r.createResources(),r.updateAutoUpdate(),r.refresh(),r.updateUniforms(),r):(0,a.A)(r)}return(0,u.A)(t,e),(0,i.A)(t,[{key:"createResources",value:function(){this.renderer.onContextCreate.add(this.onContextCreate),this.onContextCreate(this.renderer),this.camera=new g.A({near:0,far:200}),this.camera.position=[50,50,50],(0,A.A)(this.camera),this.drawInfo=(0,C.A)({DrawInfoClass:S.A,geometry:this.getOrthoGridGeometry(),uniforms:{uTime:0,uViewMatrix:this.camera.viewMatrix,uProjectionMatrix:this.camera.projectionMatrix,uGridSize:this.baseGridSize},program:this.getProgram({key:"ortho-grid-program",factory:function(){return new w.A({vert:"\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1976991360(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289_1976991360(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute_1976991360(vec3 x) {\n  return mod289_1976991360(((x*34.0)+1.0)*x);\n}\n\nfloat snoise2(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289_1976991360(i); // Avoid truncation effects in permutation\n  vec3 p = permute_1976991360( permute_1976991360( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec3 aGridPosition;\n\nuniform float uTime;\n\nuniform float uGridSize;\nuniform vec3 uScale;\nuniform float uEdgeWeight;\n\nuniform float uNoiseScale;\nuniform vec2 uNoiseClamp;\n\nuniform float uNoisePositionFactor;\nuniform float uNoiseScaleFactor;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vNormal;\nvarying float vNoiseFract;\n\nfloat map(float value, float inMin, float inMax, float outMin, float outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvoid main() {\n  vec2 uv = ((aGridPosition.xz + (aPosition.xz * uScale.xz) * uEdgeWeight) / uGridSize) * uNoiseScale;\n  float noiseValue = 0.0;\n\n  noiseValue += snoise2(uv + vec2(uTime));\n  noiseValue += snoise2(uv + vec2(sin(uTime), cos(uTime)));\n  noiseValue *= 0.5;\n  noiseValue = clamp(noiseValue, uNoiseClamp.x, uNoiseClamp.y);\n\n  float noiseFract = map(noiseValue, uNoiseClamp.x, uNoiseClamp.y, 0.0, 1.0);\n\n  float scaleFactor = 1.0 - noiseFract * uNoiseScaleFactor;\n\n  vec3 position = (aPosition * uScale * scaleFactor) + aGridPosition;\n\n  position.y += noiseValue * uNoisePositionFactor;\n\n  gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n\n  vNormal = aNormal;\n  vNoiseFract = noiseFract;\n}\n",frag:"\nuniform vec3 uLightColor;\nuniform vec3 uShadowColor;\nuniform float uLightIntensity;\nuniform vec3 uLightPosition;\n\nuniform float uNoiseColorFactor;\n\nvarying vec3 vNormal;\nvarying float vNoiseFract;\n\nvoid main() {\n  vec3 normal = normalize(vNormal);\n\n  float lightFactor = dot(normal, uLightPosition) * uLightIntensity;\n  float noiseFactor = 1.0 - (1.0 - vNoiseFract) * uNoiseColorFactor;\n\n  vec3 color = mix(uShadowColor, uLightColor, lightFactor * noiseFactor);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"})}})})}},{key:"getOrthoGridGeometry",value:function(){return this.geometryKey&&this.releaseResource(this.geometryKey),this.geometryKey="ortho-grid-geometry-".concat(this.props.boxSize),this.getGeometry({key:this.geometryKey,factory:this.createGeometryBatch})}},{key:"updateAutoUpdate",value:function(){var e=this.props.speed;this.autoUpdate=!!e}},{key:"onUpdateProps",value:function(e){this.props.boxSize!==e.boxSize&&(this.drawInfo.geometry=this.getOrthoGridGeometry()),this.updateUniforms(),this.updateAutoUpdate()}},{key:"updateUniforms",value:function(){var e=this.getColors(),t=(0,r.A)(e,2),o=t[0],n=t[1];this.drawInfo.material.uniforms=G(G({},this.drawInfo.material.uniforms),{},{uScale:[this.props.scaleX/100,this.props.scaleY/100,this.props.scaleZ/100],uEdgeWeight:this.props.isMorphEnabled?1:0,uLightColor:o,uShadowColor:n,uLightIntensity:.01*this.props.lightIntensity,uLightPosition:N.A.normalize([],[this.props.lightX,this.props.lightY,this.props.lightZ]),uNoiseScale:.01*this.props.noiseScale*2,uNoiseClamp:[.01*-this.props.noiseRange,.01*this.props.noiseRange],uNoisePositionFactor:this.props.positionFactor,uNoiseScaleFactor:this.props.scaleFactor,uNoiseColorFactor:this.props.colorFactor}),this.clearColor=n}},{key:"update",value:function(){this.drawInfo.material.uniforms.uTime+=16e-5*this.props.speed}},{key:"render",value:function(){(0,b.A)(this.renderer,this.drawInfo)}},{key:"onRefresh",value:function(){var e,t,o=this.canvas,r=o.width,n=o.height;r>n?(e=this.viewSize,t=this.viewSize*(n/r)):(e=this.viewSize*(r/n),t=this.viewSize),(0,z.A)({camera:this.camera,width:e,height:t,yUp:!0})}},{key:"onDestroy",value:function(){this.renderer.onContextCreate.remove(this.onContextCreate)}},{key:"getColors",value:function(){var e=(0,P.m)(this.props.startColor),t=(0,P.m)(this.props.endColor);return this.props.invertColors?[t,e]:[e,t]}}])}(F.A);(0,c.A)(O,"defaultProps",{boxSize:1,scaleX:0,scaleY:0,scaleZ:0,isMorphEnabled:!1,startColor:"#F08E80",endColor:"#0B0D63",invertColors:!1,lightIntensity:100,lightX:0,lightY:0,lightZ:0,speed:0,noiseScale:100,noiseRange:100,positionFactor:1,scaleFactor:0,colorFactor:1})},35689:(e,t,o)=>{"use strict";o.d(t,{A:()=>m});var r=o(71589),n=o.n(r),i=o(68051),a=o.n(i),s=o(83636),u=o.n(s),c=o(73618),l=o.n(c),h=o(41785),p=o.n(h);const m={distance:a(),copy:n(),sub:u(),set:l(),normalize:p(),setScalar:function(e,t){return e[0]=t,e[1]=t,e[2]=t,e}}},71589:e=>{e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},68051:e=>{e.exports=function(e,t){var o=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(o*o+r*r+n*n)}},41785:e=>{e.exports=function(e,t){var o=t[0],r=t[1],n=t[2],i=o*o+r*r+n*n;i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i);return e}},73618:e=>{e.exports=function(e,t,o,r){return e[0]=t,e[1]=o,e[2]=r,e}},83636:(e,t,o)=>{e.exports=o(220)},220:e=>{e.exports=function(e,t,o){return e[0]=t[0]-o[0],e[1]=t[1]-o[1],e[2]=t[2]-o[2],e}}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/new-bedford-framework/sourcemaps/e8dd51e1afbf58a2c08e4fbfef47f72f/scripts/8215.95cc6df581be52bc855c.js.map